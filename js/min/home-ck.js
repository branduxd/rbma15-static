$(document).ready(function(){function t(){try{$.getJSON("http://freegeoip.net/json/",function(t){u=t.country_name}).fail(function(t){m.attr("href",_),w.attr("href",x),y="_EDnMFJiv8U",s()}).success(function(t){"Japan"===u?(m.attr("href",M),w.attr("href",I),y="HUUa-KNyqKk",s()):(m.attr("href",_),w.attr("href",x),y="_EDnMFJiv8U",s())})}catch(t){m.attr("href",_),w.attr("href",x),y="_EDnMFJiv8U",s()}}function i(){$.getJSON("./artists.json",function(t){for(var i=t.artists,e=0;e<i.length;e++){var s=i[e].name,o=i[e].nickname,r=i[e].lecture,d=i[e].magazine,l=i[e].radio,c=i[e].bio,h=i[e].website;n(s,o),a(s,o,c,H,r,l,d,h)}}),e()}function n(t,i){$(".artist-list ul").append('<a data-name="'+t+'" href="#" data-pic="'+i+'"><li>'+t+"</li></a>"),$(".artist-images").append('<img data-pic="'+i+'" class="'+i+'" src="//d17vwh530ty7de.cloudfront.net/artist/'+i+'.jpg" alt="'+t+'">')}function a(t,i,n,a,e,s,o,r){$("#artist-info").append('<p class="bio'+i+"-bio>"+n+"</p>"),$("#artist-info").append('<div class="links"><ul class="'+i+'-links"'),e&&$("#artist-info ."+i+"-links").append('<li><a href="'+e+'" target="blank"><img src="//d17vwh530ty7de.cloudfront.net/play.gif"/></a><a href="'+e+'" target="blank">Watch Lecture</a></li>')}function e(){function t(){$("#artist").find(".artist-images").css({display:"block"})}function i(){j.each(function(){$(this).addClass("hidden")}),t()}function n(t,i){W.find(".insert-name").text(t),W.find(".exit").removeClass("hidden"),W.find(".assets img").attr("src","//d17vwh530ty7de.cloudfront.net/artist/"+i+".jpg"),H.each(function(){$(this).css({display:"none"}),$(this).addClass("hidden"),$(this).hasClass(i+"-links")&&($(this).removeClass("hidden"),$(this).css({display:"block"}))}),W.find("p").each(function(){$(this).addClass("hidden"),$(this).hasClass(i+"-bio")&&$(this).removeClass("hidden")})}function a(t,i){$("#next-artist").removeClass(),$("#next-artist").addClass(t)}var e=$("#artist").find(".artist-images"),s=$("#artist").find(".artist-list ul a");s.on("click",function(){S=s.index(this),S+=1,U=S+2,prevPos=S-1;var t=$(this).data("name"),i=$(this).data("pic");return A=$("#artist").find("ul :nth-child("+U+")").data("name"),J=$("#artist").find("ul :nth-child("+U+")").data("pic"),O=$("#artist").find("ul :nth-child("+prevPos+")").data("name"),E=$("#artist").find("ul :nth-child("+prevPos+")").data("pic"),$("#next-artist").removeClass(),$("#next-artist").addClass(J),$("#prev-artist").removeClass(),$("#prev-artist").addClass(E),$("#artist-info").find(".assets img").empty(),n(t,i),$("#artist-info").transition({left:0},500,"ease",function(){$("#go-home").fadeIn(100)}),a(J,S),S}),$("#go-home").on("click",function(){W.transition({left:"100%"},500,"ease"),$(this).hide()}),$(".artist-list ul a").on("mouseenter",function(){var t=$(this).data("name"),i=$(this).data("pic");e.css({display:"block"}),$(".artist-images img").each(function(){$(this).addClass("hidden"),$(this).hasClass(i)&&($(this).removeClass("hidden"),$(this).transition({width:"101%"},900))})}),$(".artist-list ul a").on("mouseleave",function(){i(),$(".artist-images img").each(function(){$(this).css({width:"100%"})}),e.css({display:"none"}),s.css({color:"white",backgroundColor:"transparent"})}),i(),$("#next-artist").on("click",function(){var t,i,e,s;F>S?(t=$("#artist").find("ul :nth-child("+S+")").data("pic"),i=$("#artist").find("ul :nth-child("+S+")").data("name"),e=$("#artist").find("ul :nth-child("+(S+1)+")").data("pic"),s=$("#artist").find("ul :nth-child("+(S+1)+")").data("name")):(t=$("#artist").find("ul :nth-child(0)").data("pic"),i=$("#artist").find("ul :nth-child(0)").data("name"),e=$("#artist").find("ul :nth-child(1)").data("pic"),s=$("#artist").find("ul :nth-child(1)").data("name"),S=0),n(s,e),a(e),S++}),$("#prev-artist").on("click",function(){var t,i,e,s;S>1?(t=$("#artist").find("ul :nth-child("+S+")").data("pic"),i=$("#artist").find("ul :nth-child("+S+")").data("name"),e=$("#artist").find("ul :nth-child("+(S-1)+")").data("pic"),s=$("#artist").find("ul :nth-child("+(S-1)+")").data("name")):(e=$("#artist").find("ul :nth-child("+F+")").data("pic"),s=$("#artist").find("ul :nth-child("+F+")").data("name"),S=F+1),n(s,e),a(e),S--})}function s(){function t(){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}function n(){$("#play-button").on("click",function(t){t.preventDefault(),$(this).fadeOut(),D||g.playVideo(),$("#embed").css({zIndex:"99",opacity:"1"}),k=setInterval(e,1e4)})}function a(t){1===t.data&&(v=g.getDuration()),2===t.data,0===t.data&&clearInterval(k)}function e(){var t=g.getCurrentTime(),i=t/v*100,n=Math.round(i);n>=25&&0===b&&(b=1,ga("send","event","RBMA15","Film","25perc")),n>=50&&0===C&&(C=1,ga("send","event","RBMA15","Film","50perc")),n>=75&&0===T&&(T=1,ga("send","event","RBMA15","Film","75perc"))}function s(){var t=document.getElementById("stream").getBoundingClientRect();return c=t.height?t.height:t.bottom-t.height}function o(t){t.hasClass("filmlink")?($("#wrapper").animate({scrollTop:d},p),$("#pointer").fadeOut()):t.hasClass("booklink")?($("#bookframe").html('<iframe src="/book" width="100%" height="100%" border="0"></iframe>'),$("#bookframe").transition({left:0,top:0},1e3,function(){h.removeClass("hidden").fadeIn()})):t.hasClass("aboutlink")?($("#wrapper").animate({scrollTop:$("#aboutlink").offset().top},2*p),$("#pointer").fadeOut()):t.hasClass("titlelink")&&$("#wrapper").animate({scrollTop:0},p)}function r(t){var i=t.getBoundingClientRect();return[i.left]}function f(){var t=$("#wrapper").scrollTop();winheight=$(window).height(),$("#pointer").fadeOut(),winheight/2>t&&$("#wrapper").animate({scrollTop:d},p),t>=winheight/2&&2*winheight>t&&$("#wrapper").animate({scrollTop:2*d},p),t>=2*winheight&&2.5*winheight-1>t&&$("#wrapper").animate({scrollTop:2.5*d},p),t>=2.5*winheight-10&&3.5*winheight-1>t&&$("#wrapper").animate({scrollTop:3.5*d},p),t>=3.5*winheight-1&&$("#wrapper").animate({scrollTop:6*d},1.5*p)}function u(){var t=$("#wrapper").scrollTop();winheight=$(window).height(),t>=winheight/2&&2*winheight>t&&$("#wrapper").animate({scrollTop:0},p),t>=2*winheight&&2.5*winheight-1>t&&$("#wrapper").animate({scrollTop:d},p),t>=2.5*winheight-1&&3.5*d-1>t&&$("#wrapper").animate({scrollTop:2*d},p),t>=3.5*winheight-1&&4.5*winheight>t&&$("#wrapper").animate({scrollTop:2.5*d},p),t>=4.5*d-1&&$("#wrapper").animate({scrollTop:3.5*d},p)}t(),i(),window.onYouTubeIframeAPIReady=function(t){var i=s(),e=$(window).width();g=new YT.Player("embed",{height:i,width:e,videoId:y,events:{onReady:n,onStateChange:a}})},$("#download").find(".download-left img").on("mouseenter",function(){$(this).attr("src","//d17vwh530ty7de.cloudfront.net/standard_def_back.svg")}),$("#download").find(".download-left img").on("mouseleave",function(){$(this).attr("src","//d17vwh530ty7de.cloudfront.net/standard_def_b.svg")}),$("#download").find(".download-right img").on("mouseenter",function(){$(this).attr("src","//d17vwh530ty7de.cloudfront.net/high_def_back.svg")}),$("#download").find(".download-right img").on("mouseleave",function(){$(this).attr("src","//d17vwh530ty7de.cloudfront.net/high_def_b.svg")}),$("nav").on("click","a.scroll",function(t){t.preventDefault(),o($(this))}),$("#nav-bottom").on("click","a.scroll",function(t){t.preventDefault(),o($(this)),$("#pointer").fadeOut()}),$(document).keydown(function(t){t.stopPropagation(),40===t.keyCode?f():38===t.keyCode&&u()}),$("#pointer").on("click",function(t){t.preventDefault();var i=$(window).height();$("#wrapper").animate({scrollTop:i},700,function(){$("#pointer").fadeOut()})}),h.on("click",function(t){t.preventDefault(),h.hasClass("hidden")||(l>768?($("#bookframe").transition({left:"100%",top:"-100%"},1e3),$(this).addClass("hidden"),$(this).css({display:"none"})):($("#bookframe").transition({left:"100%",top:"0"},1e3),$(this).addClass("hidden"),$(this).css({display:"none"})))})}var o=$("nav a"),r=$("#nav-bottom a"),d=$(window).height(),l=$(window).width(),c=0,h=$("#wrapper").find("#exit"),f=$(window).scrollTop()+4.5*d,p=500,u,m=$("#download").find(".download-left a"),w=$("#download").find(".download-right a"),g,v,k,y,b=0,C=0,T=0,D=navigator.userAgent.match(/(Android|iPad|iPhone|iPod)/g)?!0:!1,x="https://d1cwrlyxfuylre.cloudfront.net/HD+What+Difference+Does+It+Make%3F+A+Film+About+Making+Music.mp4",_="https://d1cwrlyxfuylre.cloudfront.net/SD-what-difference-does-it-make.mp4",I="https://d1cwrlyxfuylre.cloudfront.net/HD+JP+What+Difference+Does+It+Make%3F.mp4",M="https://d1cwrlyxfuylre.cloudfront.net/SD+JP+What+Difference+Does+It+Make%3F.mp4",P=$("#artist").find(".artist-list ul"),F=artist.length,A,B,J,O,R,E,N,S,U,j=$(".artist-images img"),W=$("#artist-info"),H=$("#artist-info").find(".links ul"),z=$("#insert-name").text(),K=$("#insert-name");t()});